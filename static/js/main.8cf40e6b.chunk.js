(this["webpackJsonp@mpan-wework/github"]=this["webpackJsonp@mpan-wework/github"]||[]).push([[0],{10:function(e,t,n){e.exports={Container:"Container_Container__13MpU",tokenInput:"Container_tokenInput__2uTiS",owner:"Container_owner__1gdhJ",logout:"Container_logout__1fklQ",login:"Container_login__z05_i",compButton:"Container_compButton__3MFji"}},17:function(e,t,n){e.exports={Container:"Container_Container__1PsPU",ReactSelect:"Container_ReactSelect__2qTby"}},20:function(e,t,n){e.exports={Container:"Container_Container__1xchs",CodeMirror:"Container_CodeMirror__35fGV",textArea:"Container_textArea__3rPsr"}},21:function(e,t,n){e.exports={Container:"Container_Container__3yJhZ",dir:"Container_dir__LCg2u",slash:"Container_slash__2ed1z"}},22:function(e,t,n){e.exports={BlobViewer:"BlobViewer_BlobViewer__3TjFI",sidebarWrapper:"BlobViewer_sidebarWrapper__1w6UP",contentWrapper:"BlobViewer_contentWrapper__1s9ME"}},31:function(e,t,n){e.exports={TreeNode:"TreeNode_TreeNode__3DTfP",current:"TreeNode_current__3BBzQ"}},32:function(e,t,n){e.exports={Container:"Container_Container__39U8O",current:"Container_current__2B6TT"}},44:function(e,t,n){"use strict";(function(e){var a=n(2),r=n.n(a),c=n(3),o=n(0),u=n.n(o),s=n(45),i=n.n(s),l=n(20),p=n.n(l),f=n(46),b=n(47);t.a=function(t){var n=t.blob,a=void 0===n?{}:n,s=Object(o.useRef)(null),l=Object(b.a)({textArea:s}),h=Object(c.a)(l,1)[0].codeMirrorRef,m=Object(f.a)((function(){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.content){t.next=2;break}return t.abrupt("return",null);case 2:return t.abrupt("return",i.a.fromBuffer(e.from(a.content,"base64")));case 3:case"end":return t.stop()}}))}),[a],null);return Object(o.useEffect)((function(){if("blob"===a.type){var e=window.atob(a.content);h.current&&h.current.getDoc().setValue(e)}}),[h,a]),u.a.createElement("main",{className:p.a.Container},u.a.createElement("div",null,JSON.stringify(m)),u.a.createElement("div",{className:p.a.CodeMirror,style:"blob"!==a.type||m?{display:"none"}:{}},u.a.createElement("textarea",{className:p.a.textArea,ref:s})))}}).call(this,n(18).Buffer)},46:function(e,t,n){"use strict";var a=n(3),r=n(0);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=Object(r.useState)(n),o=Object(a.a)(c,2),u=o[0],s=o[1];return Object(r.useEffect)((function(){Promise.resolve().then(e).then(s)}),[e,t,s]),u}},47:function(e,t,n){"use strict";var a=n(0),r=n(48),c=n.n(r);t.a=function(e){var t=e.textArea,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current&&!t.current||(n.current=c.a.fromTextArea(t.current,{mode:"javascript",theme:"the-matrix",smartIndent:!0,lineWrapping:!0,lineNumbers:!0,readOnly:!0,autofocus:!0}))}),[t,n]),[{codeMirrorRef:n}]}},52:function(e,t,n){e.exports=n(95)},57:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),u=(n(57),n(58),n(59),n(49)),s=n(9),i=n(14),l=n(2),p=n.n(l),f=n(3),b=n(44),h=n(10),m=n.n(h),d={getItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return window.localStorage.getItem("".concat(window.location.pathname,":").concat(e))||t},setItem:function(e,t){return window.localStorage.setItem("".concat(window.location.pathname,":").concat(e),t)}},v=n(34),g=function(e){var t,n,a,r=arguments;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},n=/^https:/.test(e)?e:"https://api.github.com".concat(e),c.prev=2,c.next=5,p.a.awrap(window.fetch(n,{headers:Object(i.a)({Authorization:"token ".concat(d.getItem("token"))},t.headers)}));case 5:return a=c.sent,c.abrupt("return",a.ok?a.json():null);case 9:return c.prev=9,c.t0=c.catch(2),console.error(c.t0),c.abrupt("return",null);case 13:case"end":return c.stop()}}),null,null,[[2,9]])},w=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Object(v.a)(e),Object(v.a)(t)).join("+")};return{user:function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",g("/user",{headers:{Authorization:"token ".concat(e)}}));case 1:case"end":return t.stop()}}))},orgs:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("/user/orgs"));case 1:case"end":return e.stop()}}))},tree:function(e,t,n){var a,r=arguments;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=!(r.length>3&&void 0!==r[3])||r[3],c.abrupt("return",g("/repos/".concat(e,"/").concat(t,"/git/trees/").concat(n).concat(a?"?recursive=1":"")));case 2:case"end":return c.stop()}}))},blob:function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",g(e));case 1:case"end":return t.stop()}}))},branches:function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",g("/repos/".concat(e,"/").concat(t,"/branches")));case 1:case"end":return n.stop()}}))},qrepos:function(t,n){var a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e([t],["in:name",n.org?"org:".concat(n.org):"user:".concat(n.user)]),r.abrupt("return",g("/search/repositories?q=".concat(a)));case 2:case"end":return r.stop()}}))}}}(),O=function(e){var t=e.loginCallback,n=Object(a.useState)(null),r=Object(f.a)(n,2),c=r[0],o=r[1],u=Object(a.useState)(d.getItem("token","")),s=Object(f.a)(u,2),i=s[0],l=s[1],b=Object(a.useCallback)((function(e){l(e.target.value)}),[l]),h=Object(a.useCallback)((function(){var e;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(w.user(i));case 2:(e=n.sent)&&(d.setItem("token",i),o(e),setTimeout((function(){return t(e)}),0));case 4:case"end":return n.stop()}}))}),[i,o,t]),m=Object(a.useCallback)((function(){o(null),setTimeout((function(){return t(null)}),0)}),[o,t]);return[{owner:c,token:i},{handleTokenChange:b,login:h,logout:m}]},C=function(e){var t=e.loginCallback,n=O({loginCallback:t}),a=Object(f.a)(n,2),c=a[0],o=c.owner,u=c.token,s=a[1],i=s.handleTokenChange,l=s.login,p=s.logout;return r.a.createElement("div",{className:m.a.Container},r.a.createElement("input",{className:m.a.tokenInput,type:"text",placeholder:"Personal Access Token",disabled:null!==o,onChange:i,value:u}),o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:m.a.owner},o.login),r.a.createElement("div",{className:[m.a.logout,m.a.compButton].join(" "),onClick:p},"Log Out")):r.a.createElement("div",{className:[m.a.login,m.a.compButton].join(" "),onClick:l},"Log In"))},_=n(23),j=n(17),x=n.n(j),k=function(e){var t=e.user,n=Object(a.useState)(null),r=Object(f.a)(n,2),c=r[0],o=r[1],u=Object(a.useState)(null),s=Object(f.a)(u,2),i=s[0],l=s[1],b=Object(a.useState)(null),h=Object(f.a)(b,2),m=h[0],d=h[1],v=Object(a.useCallback)((function(e){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return",[]);case 2:return a.next=4,p.a.awrap(w.orgs());case 4:return n=a.sent,a.abrupt("return",[t].concat(n).filter((function(t){return""===e.trim()||t.login.toLowerCase().indexOf(e.toLowerCase())>-1})).map((function(e){return{label:e.login,value:e.login,data:e}})));case 6:case"end":return a.stop()}}))}),[t]),g=Object(a.useCallback)((function(e){var t,n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(c){a.next=2;break}return a.abrupt("return",[]);case 2:return t="User"===c.data.type?{user:c.data.login}:{org:c.data.login},a.next=5,p.a.awrap(w.qrepos(e,t));case 5:return n=a.sent,a.abrupt("return",n.items.map((function(e){return{label:e.name,value:e.name,data:e}})));case 7:case"end":return a.stop()}}))}),[c]),O=Object(a.useCallback)((function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(c&&i){n.next=2;break}return n.abrupt("return",[]);case 2:return n.next=4,p.a.awrap(w.branches(c.data.login,i.data.name));case 4:return t=n.sent,n.abrupt("return",t.filter((function(t){return""===e.trim()||t.name.toLowerCase().indexOf(e.toLowerCase())>-1})).map((function(e){return{label:e.name,value:e.name,data:e}})));case 6:case"end":return n.stop()}}))}),[c,i]);return[{owner:c,repo:i,branch:m},{loadOwnerOptions:v,handleOwnerChange:o,loadRepoOptions:g,handleRepoChange:l,loadBranchOptions:O,handleBranchChange:d}]},E=function(e){var t=e.user,n=e.onRepoInfoChange,c=k({user:t}),o=Object(f.a)(c,2),u=o[0],s=u.owner,i=u.repo,l=u.branch,p=o[1],b=p.loadOwnerOptions,h=p.handleOwnerChange,m=p.loadRepoOptions,d=p.handleRepoChange,v=p.loadBranchOptions,g=p.handleBranchChange;return Object(a.useEffect)((function(){s&&i&&l&&setTimeout((function(){return n({owner:s,repo:i,branch:l})}),0)}),[n,s,i,l]),r.a.createElement("div",{className:x.a.Container},r.a.createElement(_.a,{className:x.a.ReactSelect,value:s,loadOptions:b,onChange:h}),r.a.createElement(_.a,{className:x.a.ReactSelect,value:i,loadOptions:m,onChange:d}),r.a.createElement(_.a,{className:x.a.ReactSelect,value:l,loadOptions:v,onChange:g}))},y=n(21),N=n.n(y),B=function(e){var t=e.path,n=Object(a.useMemo)((function(){return t.split("/")}),[t]);return r.a.createElement("div",{className:N.a.Container},n.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"".concat(t).concat(e)},r.a.createElement("div",{className:N.a.dir},e),r.a.createElement("div",{className:N.a.slash},"/"))})))},T=n(31),S=n.n(T),P=function e(t){var n=t.tree,c=t.currentPath,o=t.visitPath,u=t.className,s=Object(a.useCallback)((function(){return o(n.path)}),[n,o]),i=Object(a.useMemo)((function(){return-1===c.indexOf(n.path)}),[c,n]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[u,S.a.TreeNode,i?"":S.a.current].join(" "),onClick:s,style:{paddingLeft:"".concat(n.depth,"rem")}},n.name),n.subs.map((function(t){return r.a.createElement(e,{key:t.path,tree:t,currentPath:c,visitPath:o})})))},I=n(32),R=n.n(I),M=function(e){var t=e.blobs;return[{blobTree:Object(a.useMemo)((function(){var e={path:"/",name:"/",subs:[],depth:0},n=[e];return t.forEach((function(e){var t=null,a=e.path.lastIndexOf("/");t=-1===a?"/":e.path.slice(0,a);var r=n.find((function(e){return e.path===t})),c=Object(i.a)({},e,{name:e.path.replace(/^.+\//,""),subs:[],depth:r.depth+1});r.subs.push(c),"tree"===e.type&&n.push(c)})),e}),[t])}]},A=function(e){var t=e.tree,n=e.currentPath,a=e.visitPath,c=M({blobs:t.tree}),o=Object(f.a)(c,1)[0].blobTree;return r.a.createElement("div",{className:R.a.Container},r.a.createElement(P,{className:R.a.current,tree:o,currentPath:n,visitPath:a}))},W=n(22),L=n.n(W),V=[{path:"/blob-viewer",component:function(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),u=Object(f.a)(o,2),s=u[0],l=u[1],h=Object(a.useState)({tree:[]}),m=Object(f.a)(h,2),d=m[0],v=m[1],g=Object(a.useState)(void 0),O=Object(f.a)(g,2),_=O[0],j=O[1],x=Object(a.useCallback)((function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=7;break}return t.next=3,p.a.awrap(w.tree(s.owner.value,s.repo.value,s.branch.value));case 3:e=t.sent,v(e),t.next=8;break;case 7:v({tree:[]});case 8:case"end":return t.stop()}}))}),[s,v]);Object(a.useEffect)((function(){n&&x()}),[n,x]);var k=Object(a.useCallback)((function(e){var t,n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=d.tree.find((function(t){return t.path===e})))){a.next=8;break}return a.next=4,p.a.awrap(w.blob(t.url));case 4:n=a.sent,j(Object(i.a)({},t,{},n,{path:e})),a.next=9;break;case 8:j(void 0);case 9:case"end":return a.stop()}}))}),[d,j]);return r.a.createElement("div",{className:L.a.BlobViewer},r.a.createElement("div",{className:L.a.sidebarWrapper},r.a.createElement(A,{tree:d,currentPath:_?_.path:"/",visitPath:k})),r.a.createElement("div",{className:L.a.contentWrapper},r.a.createElement(C,{loginCallback:c}),r.a.createElement(E,{user:n,onRepoInfoChange:l}),r.a.createElement(B,{path:_?_.path:"/",visitPath:k}),r.a.createElement(b.a,{blob:_})))}}],z=function(){return r.a.createElement(u.a,null,r.a.createElement(s.d,null,V.map((function(e){return r.a.createElement(s.b,{key:e.path,path:e.path,render:function(t){return r.a.createElement(e.component,t)}})})),r.a.createElement(s.a,{from:"*",to:"/blob-viewer/"})))},F=function(){return r.a.createElement(z,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.8cf40e6b.chunk.js.map